<div class="legenda">
  <div class="labels">
    <span class="legenda-active">Active</span>
    <span class="active-modified">Active/modified</span>
    <span class="inactive">Inactive</span>
    <span class="inactive-modified">Inactive/modified</span>
  </div>

  <div class="hit-list-toggle">
    <label for="show-active-list">Order by activity</label>
    <mat-slide-toggle (change)="toggleHitList($event.checked)" [checked]="state.toggles.hits" color="primary">
    </mat-slide-toggle>
  </div>
</div>

<ol data-table *ngIf="data" cdkDropList [ohMyAnimatedList]="viewList" (cdkDropListDropped)="drop($event)">
  <li class="header">
    <span class="type">Type</span>
    <span class="method">Method</span>
    <span class="url">Url</span>
    <span class="mock">Mock</span>
    <span class="actions btns-3">Actions</span>
  </li>
  <li #animatedRow [cdkDragDisabled]="disabled" cdkDrag class="data-row" animatedsortitem
    *ngFor="let row of data; index as index; trackBy: trackBy" (click)="onDataClick(row, index)" [ngClass]="{
        'is-hit-a': hitcount[index] % 2 === 0,
        'is-hit-b': hitcount[index] % 2 === 1,
        'is-selected': selection.isSelected(index),
        'is-active': row.enabled,
        'is-modified': row.mocks[row.activeMock]?.modifiedOn}">
    <div class="custom-drag-placeholder" *cdkDragPlaceholder [ngClass]="{
        'is-hit-a': hitcount[index] % 2 === 0,
        'is-hit-b': hitcount[index] % 2 === 1,
        'is-selected': selection.isSelected(index),
        'is-active': row.enabled,
        'is-modified': row.mocks[row.activeMock]?.modifiedOn}">
      <span class="method">{{row.type}}</span>
      <span class="type">{{row.method}}</span>
      <span class="url">{{row.url}}</span>
      <span class="active">
        <oh-my-mock-label [mock]="row.mocks[row.activeMock]"></oh-my-mock-label>
      </span>
    </div>
    <span class="method">{{row.type}}</span>
    <span class="type">{{row.method}}</span>
    <span class="url">{{row.url}}</span>
    <span class="mock">
      <oh-my-mock-label [mock]="row.mocks[row.activeMock]"></oh-my-mock-label>
    </span>
    <ng-container *ngTemplateOutlet="actions; context: { row: row, index: index}"></ng-container>
  </li>
</ol>

<ng-template #actions let-row="row" let-index="index">
  <div class="actions btns-3">
    <button *ngIf="showActivate" (click)="onActivateToggle(row.id, $event)" mat-icon-button color="primary"
      aria-label="Example icon button with a menu icon">
      <mat-icon *ngIf="!row.enabled">play_arrow</mat-icon>
      <mat-icon *ngIf="row.enabled">stop</mat-icon>
    </button>
    <button *ngIf="showClone" (click)="onClone(index, $event)" mat-icon-button color="primary"
      aria-label="Example icon button with a menu icon">
      <mat-icon>content_copy</mat-icon>
    </button>
    <button *ngIf="showDelete" (click)="onDelete(row.id, $event)" mat-icon-button color="primary"
      aria-label="Example icon button with a menu icon">
      <mat-icon>delete</mat-icon>
    </button>
    <button *ngIf="showExport" (click)="onExport(row, index, $event)" mat-icon-button color="primary"
      aria-label="Example icon button with a menu icon">
      <mat-icon>import_export</mat-icon>
    </button>
  </div>
</ng-template>
