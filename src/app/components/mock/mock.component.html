<mat-card *ngIf="data" class="header">
  <app-mock-header [data]="data" [domain]="domain"></app-mock-header>
</mat-card>

<mat-card *ngIf="data?.activeStatusCode > 0" class="details">
  <section>
    <div>
      <p><span class="label">Status code:</span><span class="value">{{data.activeStatusCode}}</span></p>
      <p><span class="label">Created:</span><span class="value">{{mock.createdOn}}</span></p>
      <p><span class="label">Last modified:</span><span class="value">{{mock.modifiedOn}}</span></p>
      <p><span class="label">ContentType:</span><span class="value">{{mock.type}}/{{mock.subType}}</span></p>
      <p>
        <span class="label">Delay response:</span>
        <mat-form-field class="example-full-width">
          <mat-label>Delay in ms</mat-label>
          <input matInput [formControl]="delayFormControl" class="value" [value]="mock.delay">
        </mat-form-field>
      </p>
    </div>
    <div class="mock-actions">
      <button mat-stroked-button class="delete-mock" (click)="onDelete()">
        <mat-icon>delete_forever</mat-icon>
      </button>

      <button mat-stroked-button class="anonymize-mock" (click)="onAnonymize()">
        Anonymize your data
      </button>
    </div>
  </section>

  <section *ngIf="!dialogIsOpen" class="response">
    <header>
      <h2>Response</h2>
      <button class="js-code-edit" (click)="openShowMockCode()" mat-stroked-button>Mocking with code</button>
      <div class="spacer"></div>
      <button (click)="onShowResponseFullscreen()" mat-mini-fab color="primary"
        aria-label="Example icon button with a menu icon">
        <mat-icon>fullscreen</mat-icon>
      </button>
    </header>
    <oh-my-code-edit #response [code]="mock.responseMock" (codeChange)="onResponseChange($event)" theme="vs"
      [type]="mock.subType">
    </oh-my-code-edit>
    <button mat-button (click)="onRevertResponse()">Reset</button>
  </section>

  <section *ngIf="!dialogIsOpen" class="headers">
    <header>
      <h2>Headers</h2>
      <div class="spacer"></div>
      <button (click)="onShowHeadersFullscreen()" mat-mini-fab color="primary"
        aria-label="Example icon button with a menu icon">
        <mat-icon>fullscreen</mat-icon>
      </button>
    </header>
    <oh-my-code-edit #headers [code]="mock.headersMock" [allowErrors]="false" (codeChange)="onHeadersChange($event)"
      type="json">
    </oh-my-code-edit>
    <button mat-button (click)="onRevertHeaders()">Reset</button>
  </section>
</mat-card>
